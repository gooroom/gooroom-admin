<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="PortableCertDAO">

    <resultMap type="portableCertVO" id="portableCert">

        <result property="certId" column="CERT_ID" />
        <result property="certPw" column="CERT_PW" />
        <result property="isPublish" column="IS_PUBLISH" />
        <result property="createdDt" column="CREATED_DT" />
        <result property="transferDt" column="TRANSFER_DT" />
        <result property="certPem" column="CERT_PEM" />

    </resultMap>

    <!-- 인증서 정보 생성 -->
    <insert id="insertPortableCert" parameterType="portableCertVO">
        INSERT INTO PTGR_CERT
            (CERT_ID, CERT_PW, IS_PUBLISH)
        VALUES
            (SELECT GRNEXTVAL('PTGRCERT_SEQ'), #{certPw}, #{isPublish});
    </insert>

    <select id="selectPortableCert" parameterType="Integer">
        SELECT C.CREATED_DT, C.TRANSFER_DT
        FROM PTGR_CERT AS C
        WHERE C.CERT_ID = #{certId};
    </select>

    <delete id="deletePortableCert" parameterType="Integer">
        DELETE FROM PTGR_CERT
        WHERE CERT_ID = #{certId};
    </delete>

</mapper>
